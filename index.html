<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>2026 æ²–ç¹©äº”å¤©å››å¤œ</title>
  <style>
    :root {
      --bg-color: #f7f5f0;
      --primary: #6b7a64; /* æŠ¹èŒ¶ç¶  */
      --secondary: #c4b095; /* æœ¨è³ªèª¿ */
      --text-dark: #3a3a3a;
      --text-light: #7a7a7a;
      --white: #ffffff;
      --nav-btn: #e56b55; /* çŠç‘šç´… */
      --expense-bg: #eaf1e8;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Helvetica Neue', Arial, 'PingFang TC', 'Heiti TC', 'Microsoft JhengHei', sans-serif; }
    body { background-color: var(--bg-color); color: var(--text-dark); padding-bottom: 70px; }
    
    /* Header (å›ºå®šæ–¼é ‚éƒ¨) */
    header { 
      background-color: var(--primary); 
      color: var(--white); 
      padding: 0 15px; 
      position: sticky; 
      top: 0; 
      z-index: 100; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
      height: 75px; 
      display: flex; 
      flex-direction: column; 
      justify-content: center;
    }
    h1 { font-size: 1.2rem; font-weight: 600; margin-bottom: 4px; }
    h2 { font-size: 0.9rem; font-weight: 400; opacity: 0.9; }
    
    /* Day Selector (å¸é™„åœ¨ Header ä¸‹æ–¹) */
    .day-selector { 
      position: sticky; 
      top: 75px; 
      z-index: 95; 
      background-color: var(--bg-color); 
      display: flex; 
      overflow-x: auto; 
      padding: 15px; 
      gap: 10px; 
      scrollbar-width: none; 
      border-bottom: 1px solid #e8e8e8; 
      margin-bottom: 15px;
    }
    .day-selector::-webkit-scrollbar { display: none; }
    .day-btn { background: var(--white); border: 1px solid #ddd; padding: 8px 16px; border-radius: 20px; font-size: 0.9rem; color: var(--text-dark); white-space: nowrap; transition: 0.2s; cursor: pointer; }
    .day-btn.active { background: var(--primary); color: var(--white); border-color: var(--primary); }

    /* Content Area */
    .main-tab { display: none; }
    .main-tab.active { display: block; }
    .content-section { display: none; padding: 0 15px 20px; }
    .content-section.active { display: block; }
    
    /* Cards */
    .card { background: var(--white); border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.03); border-left: 5px solid var(--secondary); position: relative; }
    .card.transit { border-left-color: #5b8fb9; }
    .card.food { border-left-color: #e5a955; }
    .card.stay { border-left-color: #9b59b6; }
    .card.routine { border-left-color: #95a5a6; padding: 10px 15px; } 
    
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px dashed #eee; padding-bottom: 10px; }
    .card.routine .card-header { margin-bottom: 0; border-bottom: none; padding-bottom: 0; }
    
    .time { font-weight: bold; font-size: 1.1rem; color: var(--primary); }
    .weather { font-size: 0.85rem; color: var(--text-light); display: flex; align-items: center; gap: 5px; }
    
    .card-title { font-size: 1.15rem; font-weight: bold; margin-bottom: 8px; }
    .card.routine .card-title { font-size: 1rem; margin-bottom: 0; display: inline-block; margin-left: 10px; }
    .card-address { font-size: 0.85rem; color: var(--text-light); margin-bottom: 12px; line-height: 1.4; }
    
    .phone-nav { background: #f0f4f0; padding: 8px; border-radius: 6px; font-size: 1.1rem; font-weight: bold; color: var(--primary); margin-bottom: 12px; display: inline-block; letter-spacing: 1px; border: 1px solid #dce5dc; }
    .phone-nav::before { content: 'â˜ è»Šæ©Ÿ: '; font-size: 0.85rem; font-weight: normal; color: var(--text-light); }

    .guide-box { background: #fffcf5; border: 1px solid #ffebc2; padding: 10px; border-radius: 6px; font-size: 0.9rem; line-height: 1.5; margin-bottom: 12px; }
    .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; margin-right: 5px; color: #fff; }
    .tag.eat { background: #e67e22; }
    .tag.buy { background: #e74c3c; }
    .tag.alert { background: #c0392b; }
    .nav-btn { display: block; width: 100%; text-align: center; background: var(--nav-btn); color: white; text-decoration: none; padding: 10px; border-radius: 8px; font-weight: bold; font-size: 1rem; }
    
    /* Tools Section */
    .tool-card { background: var(--white); border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.03); }
    .tool-card h3 { border-bottom: 2px solid var(--secondary); padding-bottom: 8px; margin-bottom: 10px; color: var(--primary); }
    .tool-list li { list-style: none; margin-bottom: 8px; font-size: 0.9rem; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0; }

    /* Accounting Section */
    .acct-header { display: flex; justify-content: space-between; align-items: center; background: var(--expense-bg); padding: 15px; border-radius: 12px; margin-bottom: 15px; }
    .rate-box { font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }
    .rate-input { width: 60px; padding: 4px; border: 1px solid #ccc; border-radius: 4px; text-align: center; font-weight: bold; }
    
    .total-display { text-align: right; }
    .total-jpy { font-size: 1.3rem; font-weight: bold; color: var(--primary); }
    .total-twd { font-size: 0.9rem; color: var(--text-light); }

    .input-group { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px; }
    .input-item { padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; flex: 1; }
    .btn-add { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; flex-basis: 100%; font-size: 1.05rem; }
    
    /* Expense Grouping by Day */
    .day-group { margin-bottom: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); border-radius: 8px; }
    .day-header { display: flex; justify-content: space-between; align-items: center; background: var(--secondary); color: white; padding: 10px 15px; border-radius: 8px 8px 0 0; font-size: 0.95rem; }
    .day-title { font-weight: bold; }
    .day-total { font-size: 0.85rem; opacity: 0.95; }
    
    .expense-list { list-style: none; background: var(--white); border-radius: 0 0 8px 8px; }
    .expense-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; border-bottom: 1px solid #f0f0f0; }
    .expense-item:last-child { border-bottom: none; }
    .expense-info { display: flex; flex-direction: column; gap: 3px; }
    .expense-name { font-weight: bold; font-size: 1rem; color: var(--text-dark); }
    .expense-twd { font-size: 0.8rem; color: var(--text-light); }
    .expense-jpy { font-weight: bold; color: var(--nav-btn); font-size: 1.1rem; }
    .btn-delete { background: #fdf0ef; color: #e74c3c; border: none; padding: 6px 10px; border-radius: 6px; font-size: 0.8rem; cursor: pointer; margin-left: 10px; font-weight: bold;}

    /* Bottom Nav Bar */
    .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--white); display: flex; justify-content: space-around; padding: 10px 0 calc(10px + env(safe-area-inset-bottom)); box-shadow: 0 -2px 10px rgba(0,0,0,0.05); z-index: 100; }
    .bottom-nav-item { text-align: center; font-size: 0.8rem; color: var(--text-light); text-decoration: none; display: flex; flex-direction: column; align-items: center; gap: 4px; cursor: pointer; flex: 1; }
    .bottom-nav-item.active { color: var(--primary); font-weight: bold; }
    .bottom-nav-item svg { width: 22px; height: 22px; fill: currentColor; }
  </style>
</head>
<body>

  <header>
    <h1>2026 æ²–ç¹©äº”å¤©å››å¤œ</h1>
    <h2>3/11~3/15 æ²–ç¹©è‡ªé§• ğŸš—</h2>
  </header>

  <div id="tab-itinerary" class="main-tab active">
    <div class="day-selector" id="day-selector"></div>
    <div id="itinerary-content"></div>
  </div>

  <div id="tab-tools" class="main-tab" style="padding: 15px;">
    <div class="tool-card">
      <h3>âœˆï¸ èˆªç­è³‡è¨Š</h3>
      <ul class="tool-list">
        <li><strong>å»ç¨‹ (3/11)</strong>: FD230 | 13:30 èµ·é£› - 15:15 é™è½</li>
        <li><strong>å›ç¨‹ (3/15)</strong>: C123 | 20:20 èµ·é£›</li>
      </ul>
    </div>
    <div class="tool-card">
      <h3>ğŸ  ä½å®¿è³‡è¨Š</h3>
      <ul class="tool-list">
        <li><strong>åç¨±</strong>: CONDOMINIUM ç´…-BIN-</li>
        <li><strong>åœ°å€</strong>: 7 Chome-9-33 Hlyagon, Okinawa, 904-2173 æ—¥æœ¬</li>
        <li><strong>é›»è©±</strong>: +81 50-5355-8401</li>
      </ul>
    </div>
    <div class="tool-card">
      <h3>ğŸ†˜ ç·Šæ€¥è¯çµ¡é›»è©±</h3>
      <ul class="tool-list">
        <li><strong>å ±è­¦</strong>: 110</li>
        <li><strong>æ•‘è­·è»Š/ç«è­¦</strong>: 119</li>
        <li><strong>å°åŒ—é§æ—¥ç¶“æ¿Ÿæ–‡åŒ–ä»£è¡¨è™• (é‚£éœ¸)</strong>: +81-98-862-7008</li>
      </ul>
    </div>
  </div>

  <div id="tab-accounting" class="main-tab" style="padding: 15px;">
    <div class="acct-header">
      <div class="rate-box">
        åŒ¯ç‡: <input type="number" id="fx-rate" class="rate-input" value="0.21" step="0.001" onchange="updateTotals()">
      </div>
      <div class="total-display">
        <div class="total-jpy">ç¸½è¨ˆ Â¥ <span id="sum-jpy">0</span></div>
        <div class="total-twd">ç´„ NT$ <span id="sum-twd">0</span></div>
      </div>
    </div>

    <div class="input-group">
      <select id="exp-day" class="input-item" style="flex: 1; min-width: 100px;">
        <option value="1">Day 1 (3/11)</option>
        <option value="2">Day 2 (3/12)</option>
        <option value="3">Day 3 (3/13)</option>
        <option value="4">Day 4 (3/14)</option>
        <option value="5">Day 5 (3/15)</option>
      </select>
      <input type="text" id="exp-name" class="input-item" style="flex: 2; min-width: 120px;" placeholder="é …ç›®åç¨± (ä¾‹: æ‹‰éºµ)">
      <input type="number" id="exp-price" class="input-item" style="flex: 1; min-width: 100px;" placeholder="Â¥ é‡‘é¡">
      <button class="btn-add" onclick="addExpense()">ï¼‹ æ–°å¢é€™ç­†èŠ±è²»</button>
    </div>

    <div id="expense-container"></div>
  </div>

  <div class="bottom-nav">
    <div class="bottom-nav-item active" onclick="switchTab('itinerary', this)">
      <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/></svg>
      æ¯æ—¥è¡Œç¨‹
    </div>
    <div class="bottom-nav-item" onclick="switchTab('tools', this)">
      <svg viewBox="0 0 24 24"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/></svg>
      å¯¦ç”¨å·¥å…·
    </div>
    <div class="bottom-nav-item" onclick="switchTab('accounting', this)">
      <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
      é ç®—è¨˜å¸³
    </div>
  </div>

  <script>
    // ================= è¡Œç¨‹è³‡æ–™å€ =================
    const itineraryData = [
      {
        id: "day1", label: "3/11(ä¸‰)", 
        events: [
          { time: "15:55", title: "é‚£éœ¸æ©Ÿå ´ é™è½", type: "transit", address: "é‚£éœ¸æ©Ÿå ´", weather: "â›… 22Â°C" },
          { time: "17:30", title: "ORIX Rent-a-car", type: "transit", address: "1-1174 Tomigusuku, Niew 901-0225 æ—¥æœ¬", phone: "+81 98-851-0042", weather: "â›… 22Â°C" },
          { time: "18:30", title: "æ°‘å®¿ Check in (CONDOMINIUM ç´…-BIN-)", type: "stay", address: "7 Chome-9-33 Hlyagon, Okinawa 904-2173 æ—¥æœ¬", weather: "ğŸŒ™ 20Â°C" },
          { time: "19:00", title: "åŒ—è°·ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ã¡ã‚ƒãã‚³ãƒ¼", type: "food", address: "614-1 Kuwae, Chatan, Nakagami District", weather: "ğŸŒ™ 19Â°C", guide: "<span class='tag alert'>æç¤º</span> ç›´æ¥åˆ°å—é–€ï¼" },
          { time: "21:00", title: "AEON MALL", type: "buy", address: "1ç•ªåœ° Raikamu, Kitanakagusuku, Nakagami District", phone: "+81 90-930-0425", weather: "ğŸŒ™ 19Â°C", guide: "<span class='tag buy'>æ¡è²·</span>" },
          { time: "21:00", title: "MEGAå”å‰è¨¶å¾· å®‡æµéº»åº—", type: "buy", address: "Okinawa, Uruma", phone: "+81 575 054-5110", weather: "ğŸŒ™ 19Â°C", guide: "<span class='tag alert'>å½ˆæ€§å®‰æ’</span> æœ‰ç©ºå†å»ã€‚" }
        ]
      },
      {
        id: "day2", label: "3/12(å››)", 
        events: [
          { time: "09:00", title: "èµ·åºŠ", type: "routine" },
          { time: "10:00", title: "å‡ºé–€", type: "routine" },
          { time: "11:00", title: "æ³¢ä¸Šå®®", type: "spot", address: "1 Chome-25-11 Wakasa, Naha", phone: "098-868-3697", weather: "â˜€ï¸ 24Â°C", guide: "<span class='tag alert'>æ³¨æ„</span> è¦æ‰¾åœè»Šå ´ï¼" },
          { time: "13:00", title: "åœ‹éš›é€š & ç‰§å¿—å¸‚å ´", type: "spot", address: "3 Chome-2-10 Makishi, Naha", weather: "â˜€ï¸ 25Â°C", guide: "<span class='tag eat'>åˆé¤</span> èŠ±ç”Ÿè±†è…ã€é¦™æ±é£¯ç†ç­‰ã€‚<span class='tag buy'>ä¼´æ‰‹ç¦®</span> ä¸ç”¨è¼¸å…¥é›»è©±ï¼" },
          { time: "19:00", title: "æ­é›»è»Šå‰å¾€é¦–é‡Œåƒé˜¿å¤è±¬è±¬æ’", type: "food", address: "3 Chome-38-2 ãƒ›ãƒ¼ãƒ—ãƒã‚¦ã‚¹ 1F", phone: "+81 889174340", weather: "ğŸŒ™ 21Â°C" },
          { time: "21:00", title: "AEON", type: "buy", address: "1ç•ªåœ° Raikamu, Kitanakagusuku", phone: "+81 08-830-0425", weather: "ğŸŒ™ 21Â°C" }
        ]
      },
      {
        id: "day3", label: "3/13(äº”)", 
        events: [
          { time: "07:30", title: "èµ·åºŠ", type: "routine" },
          { time: "08:30", title: "å‡ºé–€", type: "routine" },
          { time: "09:30 å‰æŠµé”", title: "å¤å®‡åˆ©å³¶", type: "spot", address: "Kouri, Nakijin", weather: "â˜€ï¸ 26Â°C" },
          { time: "ä¸­åˆéå¾Œå»", title: "ç¾éº—æµ·æ°´æ—é¤¨", type: "spot", address: "Motobu", weather: "â˜€ï¸ 25Â°C" },
          { time: "å›ç¨‹", title: "è¨±ç”°ä¼‘æ¯ç«™ & å›å®¶è·¯ä¸Šè¶…å•†", type: "spot", address: "Kyoda, Nago", weather: "â›… 23Â°C" }
        ]
      },
      {
        id: "day4", label: "3/14(å…­)", 
        events: [
          { time: "08:30", title: "èµ·åºŠ", type: "routine" },
          { time: "09:30", title: "å‡ºé–€", type: "routine" },
          { time: "10:00 æŠµé”", title: "Parco City / æ¸¯å·å¤–äººä½å®…", type: "buy", address: "3 Chome-1-1 Irijima, Urasoe", weather: "â˜€ï¸ 24Â°C", guide: "<span class='tag buy'>æ³¨æ„</span> å…ˆè²·æ˜å¤©æ—©é¤ï¼" },
          { time: "14:00", title: "ç¾åœ‹æ‘", type: "spot", address: "Mihama, Chatan", weather: "ğŸŒ… 22Â°C" },
          { time: "19:00", title: "ç‡’è‚‰é‡‘æˆ", type: "food", address: "1 Chome-11-10 Kitamae, Chatan", weather: "ğŸŒ™ 20Â°C" }
        ]
      },
      {
        id: "day5", label: "3/15(æ—¥)", 
        events: [
          { time: "çœ‹é€›å¤šä¹…", title: "ç‰æ³‰æ´ / ricoland Okinawa / A&Wæ¼¢å ¡", type: "spot", address: "å—éƒ¨å½ˆæ€§å®‰æ’", weather: "â›… 23Â°C" },
          { time: "17:30 å‰", title: "ORIX é‚£éœ¸æ©Ÿå ´ é è¨ˆé‚„è»Š", type: "transit", address: "Orix", weather: "ğŸŒ… 22Â°C" },
          { time: "20:20", title: "èµ·é£› (å›ç¨‹)", type: "transit", address: "é‚£éœ¸æ©Ÿå ´", weather: "ğŸŒ™ 21Â°C" }
        ]
      }
    ];

    function renderDays() {
      const selector = document.getElementById('day-selector');
      const container = document.getElementById('itinerary-content');
      
      itineraryData.forEach((day, index) => {
        const btn = document.createElement('button');
        btn.className = `day-btn ${index === 0 ? 'active' : ''}`;
        btn.innerText = day.label;
        btn.onclick = () => selectDay(index);
        selector.appendChild(btn);

        const section = document.createElement('div');
        section.className = `content-section ${index === 0 ? 'active' : ''}`;
        section.id = `content-${index}`;
        
        day.events.forEach(event => {
          if(event.type === 'routine') {
             section.innerHTML += `
              <div class="card routine">
                <div class="card-header">
                  <span class="time">${event.time}</span>
                  <span class="card-title">${event.title}</span>
                </div>
              </div>
            `;
            return;
          }

          const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.address || event.title)}`;
          const phoneHtml = event.phone ? `<div class="phone-nav">${event.phone}</div>` : '';
          const guideHtml = event.guide ? `<div class="guide-box">${event.guide}</div>` : '';
          
          section.innerHTML += `
            <div class="card ${event.type}">
              <div class="card-header">
                <div class="time">${event.time}</div>
                <div class="weather">${event.weather}</div>
              </div>
              <div class="card-title">${event.title}</div>
              ${phoneHtml}
              <div class="card-address">ğŸ“ ${event.address}</div>
              ${guideHtml}
              <a href="${mapLink}" target="_blank" class="nav-btn">ğŸš— å°èˆªè‡³æ­¤</a>
            </div>
          `;
        });
        container.appendChild(section);
      });
    }

    function selectDay(index) {
      // é»æ“Šå¤©æ•¸æ™‚è‡ªå‹•å›åˆ°é ‚éƒ¨
      window.scrollTo({ top: 0, behavior: 'smooth' });
      document.querySelectorAll('.day-btn').forEach((btn, i) => btn.classList.toggle('active', i === index));
      document.querySelectorAll('.content-section').forEach((sec, i) => sec.classList.toggle('active', i === index));
    }

    function switchTab(tabId, element) {
      window.scrollTo({ top: 0, behavior: 'smooth' });
      document.querySelectorAll('.bottom-nav-item').forEach(item => item.classList.remove('active'));
      element.classList.add('active');
      document.querySelectorAll('.main-tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById('tab-' + tabId).classList.add('active');
    }

    // ================= è¨˜å¸³åˆ†çµ„é¡¯ç¤ºåŠŸèƒ½ =================
    let expenses = JSON.parse(localStorage.getItem('okinawa_expenses')) || [];
    const dayLabels = { "1": "3/11", "2": "3/12", "3": "3/13", "4": "3/14", "5": "3/15" };

    window.onload = () => {
      renderDays();
      const savedRate = localStorage.getItem('okinawa_rate');
      if (savedRate) document.getElementById('fx-rate').value = savedRate;
      renderExpenses();
    };

    function addExpense() {
      const dayInput = document.getElementById('exp-day').value;
      const nameInput = document.getElementById('exp-name');
      const priceInput = document.getElementById('exp-price');
      const name = nameInput.value.trim();
      const price = parseFloat(priceInput.value);

      if (!name || isNaN(price) || price <= 0) {
        alert("è«‹è¼¸å…¥æ­£ç¢ºçš„é …ç›®åç¨±èˆ‡æ—¥å¹£é‡‘é¡å“¦ï¼");
        return;
      }

      expenses.push({ id: Date.now(), day: dayInput, name, jpy: price });
      saveData();
      
      nameInput.value = '';
      priceInput.value = '';
      renderExpenses();
    }

    function deleteExpense(id) {
      expenses = expenses.filter(exp => exp.id !== id);
      saveData();
      renderExpenses();
    }

    function saveData() {
      localStorage.setItem('okinawa_expenses', JSON.stringify(expenses));
      localStorage.setItem('okinawa_rate', document.getElementById('fx-rate').value);
    }

    function renderExpenses() {
      const container = document.getElementById('expense-container');
      const rate = parseFloat(document.getElementById('fx-rate').value) || 0.21;
      container.innerHTML = '';
      
      let sumJpy = 0;
      
      const groupedExpenses = { "1": [], "2": [], "3": [], "4": [], "5": [] };
      expenses.forEach(exp => {
        groupedExpenses[exp.day].push(exp);
        sumJpy += exp.jpy;
      });

      for (let i = 1; i <= 5; i++) {
        let dayData = groupedExpenses[i.toString()];
        if (dayData.length === 0) continue; 

        let dayTotalJpy = 0;
        let listHtml = '<ul class="expense-list">';

        dayData.forEach(exp => {
          dayTotalJpy += exp.jpy;
          const twd = Math.round(exp.jpy * rate);
          listHtml += `
            <li class="expense-item">
              <div class="expense-info">
                <span class="expense-name">${exp.name}</span>
                <span class="expense-twd">ç´„ NT$ ${twd.toLocaleString()}</span>
              </div>
              <div style="display: flex; align-items: center;">
                <span class="expense-jpy">Â¥ ${exp.jpy.toLocaleString()}</span>
                <button class="btn-delete" onclick="deleteExpense(${exp.id})">âœ•</button>
              </div>
            </li>
          `;
        });
        listHtml += '</ul>';

        container.innerHTML += `
          <div class="day-group">
            <div class="day-header">
              <span class="day-title">Day ${i} (${dayLabels[i.toString()]})</span>
              <span class="day-total">å°è¨ˆ: Â¥ ${dayTotalJpy.toLocaleString()}</span>
            </div>
            ${listHtml}
          </div>
        `;
      }

      if (expenses.length === 0) {
        container.innerHTML = '<div style="text-align:center; color:#999; padding:30px;">ç›®å‰é‚„æ²’æœ‰ä»»ä½•èŠ±è²»ç´€éŒ„å–”ï¼è¶•å¿«æ–°å¢ä¸€ç­†å§ã€‚</div>';
      }

      document.getElementById('sum-jpy').innerText = sumJpy.toLocaleString();
      document.getElementById('sum-twd').innerText = Math.round(sumJpy * rate).toLocaleString();
      
      saveData(); 
    }

    function updateTotals() {
      renderExpenses();
    }
  </script>
</body>
</html>
